<!DOCTYPE html>
<html>

<head>
    <title>Calendar System</title>
    <link rel="stylesheet" href="../static/base.css">

    <!-- use Prism syntax highlighter -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism.css" rel="stylesheet" />
</head>

<!-- styling for C89 differences table -->
<style>
    code {
        font-style: normal;
    }

    .c89-same {
        background-color: #a3ffba;
        color: #333;
        padding: 2px;
    }

    .c89-similar {
        background-color: #fffca3;
        color: #333;
        padding: 2px;
    }

    .c89-different {
        background-color: #ffa3a3;
        color: #333;
        padding: 2px;
    }
</style>

<body>

    <!-- use Prism syntax highlighter -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/components/prism-core.min.js"
        integrity="sha512-xR+IAyN+t9EBIOOJw5m83FTVMDsPd63IhJ3ElP4gmfUFnQlX9+eWGLp3P4t3gIjpo2Z1JzqtW/5cjgn+oru3yQ=="
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/plugins/autoloader/prism-autoloader.min.js"
        integrity="sha512-zc7WDnCM3aom2EziyDIRAtQg1mVXLdILE09Bo+aE1xk0AM2c2cVLfSW9NrxE5tKTX44WBY0Z2HClZ05ur9vB6A=="
        crossorigin="anonymous"></script>

    <h1>Calendar System</h1>

    <p>
        Let the planetary orbital period (solar year) be 312.311 local days long, and let the moon's orbital period be
        34.397 local days long. This creates a balance of 9.106... lunar cycles per solar year. If we let the calendar
        consist of nine months, this gives nine months of 34 days (306 total) with six or seven intercalendary days.
    </p>

    <p>
        We name these ten periods as follows:
        <ol>
            <li>Sirelle</li>
            <li>Tiri</li>
            <li>Enna</li>
            <li>Fis</li>
            <li>Klesni</li>
            <li>Pelio</li>
            <li>Kria</li>
            <li>Sui</li>
            <li>Brilia</li>
            <li>Neyu</li>
        </ol>
    </p>

    <p>
        These names originate as names of gods from the ancient mythology. Neyu was an organizer whose role was to bring
        together the bickering gods and be a watcher over humanity.
    </p>

    <p>
        What we observe is that 312.311 = 312 + 4/13 + 1/302.32..., meaning that we want four leap years per cycle of 13
        years, which we can achieve with a pattern of "SSL SSL SSL S". After 13 years, 4060.043 days have passed, and
        this calendar yields 4060 days in that period, making this system only 0.043 = 1/23.2... days short, meaning
        that the calendar is short one full day after 23 cycles (299 years). In this case, the 23rd cycle can simply
        include one extra day, making the pattern "SSL SSL SSL SSL L" for that cycle.
    </p>

    <p>
        Because it'd otherwise be difficult to determine which years are leap years, etc., the date is generally written
        in the form "G:C:Y MMM DD", where G is the grand-cycle (period of 23 cycles), C is the cycle (period of 13
        years), Y is the year in the cycle, MMM is the name of the month, and DD is the day of the month. Another
        option, which is usually reserved for computer file systems due to its lexicographic ordering, is "YYYY.JJJ",
        where "YYYY" is the absolute year number, and "JJJ" is the day number of the year.
    </p>

    <p>The first day of the first year would be "1:1:1 Sirelle 1" or 0001.001, and the 43rd day of the 677th year would
        be "3:7:1 Tiri 9" or 0677.043.</p>

    <h2 id="cleressianDate-js-docs"><code>cleressianDate.js</code> Documentation</h2>

    <p>
        The source code can be imported by including <code class="language-html" style="padding: 0.3em;">&lt;script
            src="<a
                href="https://pixielf.github.io/MAGI/static/cleressianDate.js">https://pixielf.github.io/MAGI/static/cleressianDate.js</a>"&gt;&lt;/script&gt;</code>
        in the HTML file.
    </p>

    &nbsp;

    <div class="language-js">
        <div id="cdjsdocs-MONTHS">
            <code style="padding: 1ex;">
                static MONTHS = ["", "Sirelle", "Tiri", "Enna", "Fis", "Klesni", "Pelio", "Kria", "Sui", "Brilia",
                "Neyu"]
            </code>
            <blockquote>
                <p>
                    An array that can be used to look up the name of a month given its index. For a concrete date,
                    <code>a</code>, this can be done using the <a
                        href="#cdjsdocs-monthName"><code>a.monthName</code></a>
                    getter.
                </p>
                <p>
                    Note that <code>MONTHS[0] == ""</code>. This is to emulate the 1-indexing used by the calendar
                    system.
                </p>
            </blockquote>
        </div>

        <div id="cdjsdocs-constructor">
            <code style="padding: 1ex;">
                constructor(grandCycle=1, cycle=1, year=1, month=1, day=1)
            </code>
            <blockquote>
                <p>
                    Create a new <code>CleressianDate</code> object. The value for <code>month</code> may be either the
                    integer index for the month (1, 2, ..., 10) or the name of the month as a string. The other four
                    parameters should be integers.
                </p>
                <p>
                    This constructor performs a verification on the passed date. In particular, <code>cycle</code> must
                    be between 1 and 23, <code>year</code> must be between 1 and 13, <code>month</code> must be between
                    1 and 10 (or a proper month name), and <code>day</code> must be a valid day for the given month. If
                    this verification fails, a <code>RangeError</code> is thrown.
                </p>
                <p>
                    All five passed values are directly readable attributes of the constructed date.
                </p>
            </blockquote>
        </div>

        <div id="cdjsdocs-fromAbsoluteDate">
            <code style="padding: 1ex;">
                static fromAbsoluteDate(year, day=1)
            </code>
            <blockquote>
                <p>
                    An alternate constructor which instead uses absolute year and day, rather than the human-readable
                    standard. Both parameters should be integers. This method uses the constructor, so the verification
                    is applied in this case as well; this should only be a problem if <code>day</code> is too large
                    to fit into the given year.
                </p>
                <p>
                    Absolute year 1 == 1:1:1.
                </p>
                <pre><code style="font-style: normal;">// Example:
In [1]: CleressianDate.fromAbsoluteDate(677, 43)
Out[1]: Object { grandCycle: 3, cycle: 7, year: 1, month: 2, day: 9 }
In [2]: CleressianDate.fromAbsoluteDate(677, 43) instanceof CleressianDate
Out[2]: true</code></pre>
        </div>

        <div id="cdjsdocs-toAbsoluteDate">
            <code style="padding: 1ex;">
                toAbsoluteDate()
            </code>
            <blockquote>
                <p>
                    Interpret a <code>CleressianDate</code> and return its value as an absolute date. In particular,
                    the return of this function is an object with two attributes: the absolute year and the day number.
                </p>
                <p>
                    Absolute year 1 == 1:1:1.
                </p>
                <pre><code>// Example:
In [1]: new CleressianDate(3, 7, 1, 'Tiri', 9).toAbsoluteDate()
Out[1]: Object { year: 677, day: 43 }
In [2]: new CleressianDate(3, 7, 1, 'Tiri', 9).toAbsoluteDate().year
Out[2]: 677

// For any CleressianDate a:
In [3]: t = a.toAbsoluteDate();
In [4]: CleressianDate.fromAbsoluteDate(t.year, t.day).equals(a)
Out[4]: true

// For any values of year and day (for which fromAbsoluteDate doesn't throw an error):
In [5]: t = CleressianDate.fromAbsoluteDate(year, day);
In [6]: t.toAbsoluteDate().year == year
Out[6]: true
In [7]: t.toAbsoluteDate().day == day
Out[7]: true</code></pre>
            </blockquote>
        </div>

        <div id="cdjsdocs-monthName">
            <code style="padding: 1ex;">
                get monthName()
            </code>
            <blockquote>
                <p>
                    Return the name of the month that the date is in. Note that this is a getter, meaning that it can
                    be called as an attribute.
                </p>
                <pre><code>// Example:
In [1]: a = new CleressianDate(3, 7, 1, 'Tiri', 9);
In [2]: a.month
Out[2]: 2
In [3]: a.monthName
Out[3]: "Tiri"</code></pre>
            </blockquote>
        </div>

        <div id="cdjsdocs-isLeapYear">
            <code style="padding: 1ex;">
                static isLeapYear(cycle, year)
            </code>
            <blockquote>
                <p>
                    Return <code>true</code> when _:cycle:year is a leap year and <code>false</code> otherwise.
                </p>
            </blockquote>
        </div>

        <div id="cdjsdocs-daysInMonth">
            <code style="padding: 1ex;">
                static daysInMonth(cycle, year, month)
            </code>
            <blockquote>
                <p>
                    Return the number of days in the given month, which also (for the purposes of leap years), depends
                    on the cycle and year. All three parameters should be integers.
                </p>
                <p>
                    The output will be one of the following values:
                    <ul>
                        <li>34: if <code>month</code> is not 10</li>
                        <li>7: if <code>month</code> is 10 and _:cycle:year is a leap year
                        </li>
                        <li>6: if <code>month</code> is 10 and _:cycle:year is not a leap year</li>
                    </ul>
                </p>
            </blockquote>
        </div>

        <div id="cdjsdocs-daysInYear">
            <code style="padding: 1ex;">
                static daysInYear(cycle, year)
            </code>
            <blockquote>
                <p>
                    Return the number of days in the given year. The output is 313 when _:cycle:year is a leap year
                    and 312 otherwise.
                </p>
            </blockquote>
        </div>

        <h3 id="cdjsdocs-comparisons">Comparison Methods</h3>

        <p>
            For the purposes of this discussion, consider <code>x &lt; y</code> when <code>x</code> defines a date
            which occurs before <code>y</code>. Then, the following are defined (and throw <code>TypeError</code> if
            the parameter(s) is/are not a <code>CleressianDate</code> object):
        </p>

        <div>
            <code style="padding: 1ex;">
                static compare(x, y)
            </code>
            <blockquote>
                <p>
                    The origin of all of these comparison functions. This returns 0 when the dates are equal,
                    -1 when <code>x &lt; y</code>, and 1 if <code>x > y</code>.
                </p>
            </blockquote>

            <table class="pretty">
                <tr>
                    <th>Comparison</th>
                    <th>"Equivalent" Method Call</th>
                </tr>
                <tr>
                    <th><code>x == y</code></th>
                    <td><code>x.equals(y)</code> or <code>x.eq(y)</code></td>
                </tr>
                <tr>
                    <th><code>x != y</code></th>
                    <td><code>!x.equals(y)</code>, <code>!x.eq(y)</code>, or <code>x.ne(y)</code></td>
                </tr>
                <tr>
                    <th><code>x &lt; y</code></th>
                    <td><code>x.lt(y)</code></td>
                </tr>
                <tr>
                    <th><code>x &lt;= y</code></th>
                    <td><code>x.le(y)</code></td>
                </tr>
                <tr>
                    <th><code>x &gt; y</code></th>
                    <td><code>x.gt(y)</code></td>
                </tr>
                <tr>
                    <th><code>x &gt;= y</code></th>
                    <td><code>x.ge(y)</code></td>
                </tr>
            </table>
        </div>

        <h3 id="cdjsdocs-arithmetic">Arithmetic Methods</h3>
        <div>
            <div id="cdjsdocs-distance">
                <code style="padding: 1ex;">
                    static distance(x, y)
                </code>
                <blockquote>
                    <p>
                        Return an object that contains the number of days and years between the two given dates. The
                        values
                        returned are always positive, meaning that this could be interpreted as <code>abs(x - y)</code>.
                    </p>
                    <pre><code>// Example:
In [1]: a = new CleressianDate(3, 7, 1, 'Tiri', 9);
In [2]: b = new CleressianDate(3, 7, 1, 'Tiri', 11);
In [3]: CleressianDate.distance(a, b)
Out[3]: Object { years: 0, days: 2 }

In [4]: x = CleressianDate.fromAbsoluteDate(3000, 41);
In [5]: y = CleressianDate.fromAbsoluteDate(211, 310);
In [6]: CleressianDate.distance(x, y)
Out[6]: Object { years: 2788, days: 43 }</code></pre>
                </blockquote>
            </div>

            <div id="cdjsdocs-plus">
                <code style="padding: 1ex;">
                    plus(years=0, days=0)
                </code>
                <blockquote>
                    <p>
                        Return a new date with the given number of years and days added.
                    </p>
                </blockquote>
            </div>

            <div id="cdjsdocs-minus">
                <code style="padding: 1ex;">
                    minus(years=0, days=0)
                </code>
                <blockquote>
                    <p>
                        Return a new date with the given number of years and days subtracted.
                    </p>
                    <p>
                        For all <code>CleressianDate</code>s, <code>a</code>, we have
                    </p>
                    <pre><code>// For all CleressianDates a and integers years and days:
In [1]: a.plus(years, days).minus(years, days).equals(a)
Out[1]: true
In [2]: a.minus(years, day).plus(years, days).equals(a)
Out[2]: true</code></pre>
                </blockquote>
            </div>
        </div>

        <h3 id="cdjsdocs-formatting">Formatting methods</h3>
        <div>
            <div id="cdjsdocs-strftime">
                <code style="padding: 1ex;">
                    strftime(template)
                </code>
                <blockquote>
                    <p>
                        Return a string representation of the date according to the template string. See below for
                        information about template string placeholders.
                    </p>
                    <pre><code>// Example:
In [1]: a = CleressianDate(3, 7, 1, 'Tiri', 9);
In [2]: a.strftime("Grand Cycle = %g, Cycle = %c, Year = %y")
Out[2]: 'Grand Cycle = 3, Cycle = 7, Year = 1'</code></pre>
                </blockquote>
            </div>

            <div id="cdjsdocs-toString">
                <code style="padding: 1ex;">
                    toString(template="%x")
                </code>
                <blockquote>
                    <p>
                        Return a string representation of the date.
                    </p>
                    <p>
                        This is a wrapper around <a href="#cdjsdocs-strftime"><code>strftime(template)</code></a>, and
                        the functions are identical except that <code>toString</code>'s template parameter is optional
                        and defaults to the standard <code>"%x"</code> format.
                    </p>
                    <pre><code>// For all CleressianDates a and integers years and days:
In [1]: a.plus(years, days).minus(years, days).equals(a)
Out[1]: true
In [2]: a.minus(years, day).plus(years, days).equals(a)
Out[2]: true</code></pre>
                </blockquote>
            </div>

            <div id="cdjsdocs-strptime">
                <code style="padding: 1ex;">
                    static strptime(dateStr, template)
                </code>
                <blockquote>
                    <p>
                        <span class="strong">Not Currently Implemented.</span> Returns a CleressianDate by parsing
                        the given template string. Any constructor values which are not given or inferrable in the
                        date string are set to 1.
                    </p>
                    <pre><code>// Example:
In [1]: CleressianDate.strptime("3:7:1 Tiri 9", "%x")
Out[1]: Object { grandCycle=3, cycle=7, year=1, month=2, day=3 }
In [2]: CleressianDate.strptime("Tiri 9", "%B %d")
Out[2]: Object { grandCycle=1, cycle=1, year=1, month=2, day=3 }</code></pre>
                </blockquote>
            </div>

            <h3 id="cdjsdocs-template-specs">Template Specifications</h3>
            <div>
                <p>
                    This standard is based on the 1989 C standard, which defines the format codes for various date
                    and time objects. However, attention should be paid to the differences between these two
                    specifications, as they are not identical. Rows in the table are colored according to the following
                    convention: <span class="c89-same">the standards are the same</span>, <span class="c89-similar">the
                        standards are similar</span>, and <span class="c89-different">the standards are completely
                        different.</span>
                </p>


                <div>
                    <table class="c89-differences">
                        <tr>
                            <th>Format Code</th>
                            <th>CleressianDate</th>
                            <th>C89 Standard</th>
                        </tr>

                        <tr>
                            <th class="c89-different"><code>%g</code></th>
                            <td class="c89-different">number of grand cycle <br /> (1, 2, 3, ...)</td>
                            <td class="c89-different">N/A</td>
                        </tr>
                        <tr>
                            <th class="c89-different"><code>%c</code></th>
                            <td class="c89-different">number of cycle in grand cycle <br /> (1, 2, 3, ..., 23)</td>
                            <td class="c89-different">Locale's appropriate date and time representation <br /> (e.g.,
                                Tue Aug 16
                                21:30:00 1988)</td>
                        </tr>
                        <tr>
                            <th class="c89-similar"><code>%y</code></th>
                            <td class="c89-similar">number of year within cycle <br /> (1, 2, 3, ..., 13)</td>
                            <td class="c89-similar">Year without century as a zero-padded decimal number. <br /> (00,
                                01, 02, ...,
                                99)
                            </td>
                        </tr>
                        <tr>
                            <th class="c89-same"><code>%b</code></th>
                            <td class="c89-same">abbreviated name of month <br /> (Sir, Tir, ..., Ney)</td>
                            <td class="c89-same">Month as locale's abbreviated name. <br /> (Jan, Feb, ..., Dec)</td>
                        </tr>
                        <tr>
                            <th class="c89-same"><code>%B</code></th>
                            <td class="c89-same">full name of month <br /> (Sirelle, Tiri, ..., Neyu)</td>
                            <td class="c89-same">Month as locale's full name. <br /> (January, February, ..., December)
                            </td>
                        </tr>
                        <tr>
                            <th class="c89-similar"><code>%m</code></th>
                            <td class="c89-similar">number of month <br /> (1, 2, 3, ..., 10)</td>
                            <td class="c89-similar">Month as a zero-padded decimal number. <br /> (01, 02, 03, ..., 12)
                            </td>
                        </tr>
                        <tr>
                            <th class="c89-similar"><code>%d</code></th>
                            <td class="c89-similar">number of day of the month <br /> (1, 2, 3, ..., 34)</td>
                            <td class="c89-similar">Day of the month as a zero-padded decimal number. <br /> (01, 02,
                                03, ..., 31)
                            </td>
                        </tr>
                        <tr>
                            <th class="c89-similar"><code>%j</code></th>
                            <td class="c89-similar">day of the year <br /> (1, 2, 3, ..., 313)</td>
                            <td class="c89-similar">Day of the year as a zero-padded decimal number. <br /> (001, 002,
                                003, ..., 366)
                            </td>
                        </tr>
                        <tr>
                            <th class="c89-similar"><code>%Y</code></th>
                            <td class="c89-similar">number of absolute year <br /> (1, 2, 3, ...)</td>
                            <td class="c89-similar">Year with century as a decimal number. <br /> (0001, 0002, 03, ...,
                                9999)</td>
                        </tr>
                        <tr>
                            <th class="c89-same"><code>%x</code></th>
                            <td class="c89-same">standard form date representation <br /> (shorthand for <code>%g:%c:%y
                                    %B %d</code>)
                            </td>
                            <td class="c89-same">Locale's appropriate date representation. <br /> (e.g., 08/16/1988 for
                                en_US)</td>
                        </tr>
                        <tr>
                            <th class="c89-different"><code>%X</code></th>
                            <td class="c89-different">absolute form date representation <br /> (shorthand for
                                <code>%04Y.%03j</code>)
                            </td>
                            <td class="c89-different">Locale's appropriate time representation <br /> (e.g., 21:30:00
                                for en_US)
                            </td>
                        </tr>
                        <tr>
                            <th class="c89-same"><code>%%</code></th>
                            <td class="c89-same"> A literal <code>%</code> character</td>
                            <td class="c89-same"> A literal <code>%</code> character</td>
                        </tr>
                    </table>
                </div>

                <p>
                    The primary difference between the two specifications is that this specification does not pad its
                    values to a constant width, though the C89 standard does. However, the CleressianDate standard
                    does support padding options: all of the numeric formats support <code style="padding: 0.5em;">
                        %0N_</code> structures, where <code>N</code> is some integer; this will pad the formatted value
                    to have at least <code>N</code> digits. Note that <code>"%X"</code> includes the pads in its
                    expansion: <code>"%04Y.03j"</code>.
                </p>
                <pre><code>// Example:
In [1]: a = CleressianDate(3, 7, 1, Month.TIRI, 9);
In [2]: a.strftme("%Y.%j")      // use only as many digits as necessary
Out[2]: '677.43'
In [3]: a.strftime('%04Y.%03j') // pad absolute year to 4 digits, day-of-year to 3 digits
Out[3]: '0677.043'</code></pre>
            </div>
        </div>
    </div>

</body>

</html>